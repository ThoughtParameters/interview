{"version":3,"file":"component---src-pages-profile-js.js","mappings":"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","sources":["webpack://gatsby-starter-hello-world/./src/components/PrivateRoute.js","webpack://gatsby-starter-hello-world/./src/components/header.js","webpack://gatsby-starter-hello-world/./src/components/cookie-consent.js","webpack://gatsby-starter-hello-world/./src/components/layout.js","webpack://gatsby-starter-hello-world/./src/hooks/use-site-metadata.js","webpack://gatsby-starter-hello-world/./src/components/seo.js","webpack://gatsby-starter-hello-world/./src/pages/profile.js"],"sourcesContent":["import React from 'react';\nimport { navigate } from 'gatsby';\nimport { useAuth } from '../context/AuthContext';\n\nconst PrivateRoute = ({ component: Component, location, ...rest }) => {\n  const { user, loading } = useAuth();\n\n  if (loading) {\n    return <p>Loading...</p>; // Or a spinner component\n  }\n\n  if (!user) {\n    // If weâ€™re not on the client side, donâ€™t redirect\n    if (typeof window !== 'undefined') {\n      navigate('/login');\n    }\n    return null;\n  }\n\n  return <Component {...rest} />;\n};\n\nexport default PrivateRoute;\n","import React from 'react';\nimport { Link } from 'gatsby';\nimport { useAuth } from '../context/AuthContext';\n\nconst Header = () => {\n  const { user, signOut } = useAuth();\n\n  return (\n    <header className=\"bg-gray-800 mb-6\">\n      <div className=\"container mx-auto px-6 py-4 flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold text-white\">\n          <Link to=\"/\" className=\"text-white no-underline\">\n            Thought Parameters\n          </Link>\n        </h1>\n        <nav>\n          <Link to=\"/blog\" className=\"text-white ml-5 no-underline\">\n            Blog\n          </Link>\n          <Link to=\"/learn\" className=\"text-white ml-5 no-underline\">\n            Learn\n          </Link>\n          <Link to=\"/exams\" className=\"text-white ml-5 no-underline\">\n            Exams\n          </Link>\n          {user ? (\n            <>\n              <Link to=\"/profile\" className=\"text-white ml-5 no-underline\">\n                Profile\n              </Link>\n              <button\n                onClick={signOut}\n                className=\"text-white ml-5 no-underline bg-transparent border-none cursor-pointer\"\n              >\n                Logout\n              </button>\n            </>\n          ) : (\n            <Link to=\"/login\" className=\"text-white ml-5 no-underline\">\n              Login\n            </Link>\n          )}\n        </nav>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n","import React from 'react';\nimport CookieConsent from 'react-cookie-consent';\n\nconst CookieConsentBanner = () => {\n  return (\n    <CookieConsent\n      location=\"bottom\"\n      buttonText=\"Accept\"\n      cookieName=\"gatsby-gdpr-google-analytics\"\n      style={{ background: '#2B373B' }}\n      buttonStyle={{ color: '#4e503b', fontSize: '13px' }}\n      expires={150}\n    >\n      This website uses cookies to enhance the user experience.\n    </CookieConsent>\n  );\n};\n\nexport default CookieConsentBanner;\n","import React from 'react';\nimport Header from './header';\nimport CookieConsentBanner from './cookie-consent';\nimport '../styles/global.css';\n\nconst Layout = ({ children }) => {\n  return (\n    <div className=\"bg-gray-900 text-white min-h-screen\">\n      <Header />\n      <main className=\"container mx-auto px-6 py-8\">{children}</main>\n      <CookieConsentBanner />\n    </div>\n  );\n};\n\nexport default Layout;\n","import { useStaticQuery, graphql } from 'gatsby';\n\nexport const useSiteMetadata = () => {\n  const data = useStaticQuery(graphql`\n    query {\n      site {\n        siteMetadata {\n          title\n          description\n          twitterUsername\n          image\n          siteUrl\n        }\n      }\n    }\n  `);\n\n  return data.site.siteMetadata;\n};\n","import React from 'react';\nimport { useSiteMetadata } from '../hooks/use-site-metadata';\n\nexport const SEO = ({ title, description, pathname, children }) => {\n  const { title: defaultTitle, description: defaultDescription, image, siteUrl, twitterUsername } = useSiteMetadata();\n\n  const seo = {\n    title: title || defaultTitle,\n    description: description || defaultDescription,\n    image: `${siteUrl}${image}`,\n    url: `${siteUrl}${pathname || ``}`,\n    twitterUsername,\n  };\n\n  return (\n    <>\n      <title>{seo.title}</title>\n      <meta name=\"description\" content={seo.description} />\n      <meta name=\"image\" content={seo.image} />\n      <meta name=\"twitter:card\" content=\"summary_large_image\" />\n      <meta name=\"twitter:title\" content={seo.title} />\n      <meta name=\"twitter:url\" content={seo.url} />\n      <meta name=\"twitter:description\" content={seo.description} />\n      <meta name=\"twitter:image\" content={seo.image} />\n      <meta name=\"twitter:creator\" content={seo.twitterUsername} />\n      <link rel=\"icon\" href=\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ðŸ‘¤</text></svg>\" />\n      {children}\n    </>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport Layout from '../components/layout';\nimport { SEO } from '../components/seo';\nimport PrivateRoute from '../components/PrivateRoute';\nimport { useAuth } from '../context/AuthContext';\nimport { navigate } from 'gatsby';\nimport { getSupabase } from '../utils/supabase';\n\nconst ProfileContent = () => {\n  const { user, deleteUser, signOut } = useAuth();\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [examHistory, setExamHistory] = useState([]);\n\n  useEffect(() => {\n    const fetchExamHistory = async () => {\n      try {\n        const supabase = getSupabase();\n        const { data: session, error: sessionError } = await supabase.auth.getSession();\n        if (sessionError) throw sessionError;\n\n        const response = await fetch('https://interviewapi.thoughtparameters.com/profile/exam-history', {\n          headers: {\n            Authorization: `Bearer ${session.session.access_token}`,\n          },\n        });\n        if (!response.ok) {\n          throw new Error('Failed to fetch exam history');\n        }\n        const data = await response.json();\n        setExamHistory(data);\n      } catch (err) {\n        setError(err.message);\n      }\n    };\n\n    fetchExamHistory();\n  }, []);\n\n  const handleDelete = async () => {\n    if (window.confirm('Are you sure you want to delete your account? This action is irreversible.')) {\n      setLoading(true);\n      setError('');\n      try {\n        await deleteUser();\n        await signOut();\n        navigate('/');\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n\n  return (\n    <Layout>\n      <SEO title=\"Profile\" />\n      <div className=\"max-w-4xl mx-auto\">\n        <h1 className=\"text-3xl font-bold mb-4\">Your Profile</h1>\n        <div className=\"bg-gray-800 p-6 rounded-lg mb-8\">\n          <p className=\"mb-4\">\n            Welcome, {user?.user_metadata.full_name || user?.email}!\n          </p>\n          <h2 className=\"text-xl font-bold mt-6 mb-2\">Account Settings</h2>\n          <button\n            onClick={handleDelete}\n            disabled={loading}\n            className=\"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n          >\n            {loading ? 'Deleting...' : 'Delete Account'}\n          </button>\n          {error && <p className=\"text-red-500 text-sm mt-2\">{error}</p>}\n        </div>\n\n        <h2 className=\"text-2xl font-bold mb-4\">Exam History</h2>\n        <div className=\"bg-gray-800 p-6 rounded-lg\">\n          {examHistory.length > 0 ? (\n            <ul className=\"divide-y divide-gray-700\">\n              {examHistory.map((exam, index) => (\n                <li key={index} className=\"py-4\">\n                  <p><strong>Exam:</strong> {exam.exam_type}</p>\n                  <p><strong>Score:</strong> {exam.score}%</p>\n                  <p><strong>Result:</strong> {exam.passed ? 'Passed' : 'Failed'}</p>\n                  <p><strong>Date:</strong> {new Date(exam.completed_at).toLocaleString()}</p>\n                  <p><strong>Duration:</strong> {exam.duration_seconds} seconds</p>\n                </li>\n              ))}\n            </ul>\n          ) : (\n            <p>You have not taken any exams yet.</p>\n          )}\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nconst ProfilePage = () => <PrivateRoute component={ProfileContent} />;\n\nexport default ProfilePage;\n"],"names":["React","navigate","useAuth","PrivateRoute","component","Component","location","rest","user","loading","window","Link","Header","signOut","CookieConsent","CookieConsentBanner","background","color","fontSize","Layout","children","useStaticQuery","useSiteMetadata","data","site","siteMetadata","SEO","title","description","pathname","defaultTitle","defaultDescription","image","siteUrl","twitterUsername","seo","url","useState","useEffect","getSupabase","ProfileContent","deleteUser","error","setError","setLoading","examHistory","setExamHistory","fetchExamHistory","supabase","session","sessionError","auth","getSession","response","fetch","headers","Authorization","access_token","ok","Error","json","err","message","handleDelete","confirm","user_metadata","full_name","email","length","map","exam","index","exam_type","score","passed","Date","completed_at","toLocaleString","duration_seconds","ProfilePage"],"sourceRoot":""}